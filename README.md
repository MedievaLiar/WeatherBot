# PiterMoment

ü™Å Telegram: @weather_aggregat_bot

–ë–æ—Ç, —Å–æ–±–∏—Ä–∞—é—â–∏–π —Å—É–ø–µ—Ä–ø—Ä–æ–≥–Ω–æ–∑, –∏—Å–ø–æ–ª—å–∑—É—è –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã –ø–æ–≥–æ–¥—ã üòéüå¶

# üåü –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1) –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã **–≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏** –∑–∞ —Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
 - [Gismeteo (HTML-–ø–∞—Ä—Å–∏–Ω–≥)](https://www.gismeteo.ru/)
 - [–Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥–∞ (HTML-–ø–∞—Ä—Å–∏–Ω–≥)](https://yandex.ru/pogoda/ru/fiorentino?via=reg&lat=43.909068&lon=12.459716)
 - [OpenWeatherMap API](https://openweathermap.org)
 - [AccuWeather API](https://www.accuweather.com/)
 - [Sunrise-Sunset API](https://sunrise-sunset.org/)
 - [NASA (—à—É—Ç–∫–∞)]()

2) **–ì–∏–±–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤**:
  - –ü–æ–≥–æ–¥–∞ —Å–µ–π—á–∞—Å
  - –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
  - –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∑–∞–≤—Ç—Ä–∞

3) **–ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∞** –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞
  - –ê–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4) **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≥–Ω–æ–∑–∞**:
```
üìç–ü–æ–≥–æ–¥–∞ —Å–µ–≥–æ–¥–Ω—è, 29.05.2025, –≤ –≥–æ—Ä–æ–¥–µ:
–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥

üçÄ –£—Ç—Ä–æ:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 19¬∞C
(–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 17¬∞C)
–í–ª–∞–∂–Ω–æ—Å—Ç—å: 73%
–í–µ—Ç–µ—Ä: 5.0 –º/—Å
 ‚òîÔ∏èüåßÔ∏è –ù–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å

üèµ –î–µ–Ω—å:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 23¬∞C
(–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 21¬∞C)
–í–ª–∞–∂–Ω–æ—Å—Ç—å: 51%
–í–µ—Ç–µ—Ä: 5.0 –º/—Å
 ‚òîÔ∏èüåßÔ∏è –ù–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å

ü™Å –í–µ—á–µ—Ä:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 21¬∞C
(–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 19¬∞C)
–í–ª–∞–∂–Ω–æ—Å—Ç—å: 70%
–í–µ—Ç–µ—Ä: 2.7 –º/—Å
 üå§Ô∏è –û–±–ª–∞—á–Ω–æ —Å –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è–º–∏

üåë –ù–æ—á—å:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 17¬∞C
(–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 17¬∞C)
–í–ª–∞–∂–Ω–æ—Å—Ç—å: 85%
–í–µ—Ç–µ—Ä: 1.7 –º/—Å
 üê± –ü–∞—Å–º—É—Ä–Ω–æ

üåä –†–∞—Å—Å–≤–µ—Ç: 03:49
üèúÔ∏è –ó–∞–∫–∞—Ç: 22:02
```

# üõ†Ô∏è –ß—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?
1) –ê—Å–∏—Ö—Ä–æ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

2) –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –±—ã—Å—Ç—Ä–æ –æ—Ç–¥–∞–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —Ç–µ—Ä—è—è –≤ —Å–≤–µ–∂–µ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞

3) –û—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è read-lock
    –í–∫—É–ø–µ –ø–µ—Ä–≤—ã–µ –¥–≤–∞ –ø—É–Ω–∫—Ç–∞ –¥–∞—é—Ç –Ω–∞–º –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π rps –≤ 10000+ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –æ–±–ª–∞—á–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å apigateway –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ username

3) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

4) –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–Ω—è—Ç–Ω–∞—è –∏ –ª–µ–≥–∫–∞—è –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π. –í—ã–¥–µ—Ä–∂–∞–Ω–∞ —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
    ```weather_bot/
    ‚îú‚îÄ‚îÄ bot/                   # Telegram-–±–æ—Ç –∏ –ª–æ–≥–∏–∫–∞ –æ–±—â–µ–Ω–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ messages/          # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îÇ   ‚îú‚îÄ‚îÄ storage/           # –ö—ç—à –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îÇ   ‚îî‚îÄ‚îÄ bot.go             # –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ aggregator/            # –°–±–æ—Ä –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îú‚îÄ‚îÄ format/            # –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –æ–±—â–µ–º—É —Ñ–æ—Ä–º–∞—Ç—É
    ‚îÇ   ‚îî‚îÄ‚îÄ weather_sources/   # –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ–≥–æ–¥—ã
    ‚îú‚îÄ‚îÄ config/                # –ö–ª—é—á–∏, –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–æ–≤
    ‚îú‚îÄ‚îÄ models/                # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ main.go                # –¢–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞
    ‚îú‚îÄ‚îÄ go.mod / go.sum        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îî‚îÄ‚îÄ README.md              # You are here
    ```

# üöÄ –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–æ—Ç–∞ —É —Å–µ–±—è?

1) –¢—Ä–µ–±—É–µ—Ç—Å—è Go >= 1.20 - https://go.dev/doc/install
2) –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```
git clone https://github.com/MedievaLiar/WeatherBot.git
cd WeatherBot
```
3) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```
    go get github.com/PuerkitoBio/goquery github.com/go-telegram-bot-api/telegram-bot-api/v5 github.com/robfig/cron/v3 gopkg.in/yaml.v3
    ```
4) –ü–æ–ª—É—á–∏—Ç—å –∏ –∑–∞–ø–∏—Å–∞—Ç—å –∫–ª—é—á–∏ –≤ `./config/`:
   * config/api_keys.yaml
   * config/accu_keys.yaml

    –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–æ–≤ API –∫–ª—é—á–µ–π –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–∑ config/example_.yaml

5) –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:
   ```
   go run main.go
   ```
# ‚ö†Ô∏è Known issues

- –í –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è BDUI, –∞ API –ø–ª–∞—Ç–Ω–æ–µ - –≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É —ç—Ç–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è.
- AccuWeather —Ç—Ä–µ–±—É–µ—Ç API-–∫–ª—é—á –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞.
- NASA –ø–æ–∫–∞ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–æ –º—ã –¥–µ—Ä–∂–∏–º –∏—Ö –≤ —Ä–µ–∑–µ—Ä–≤–µ üòâ).
